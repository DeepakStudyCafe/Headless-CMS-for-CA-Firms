server {
    listen 80;
    server_name api.digitechai.in;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name api.digitechai.in;

    ssl_certificate /etc/letsencrypt/live/api.digitechai.in/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/api.digitechai.in/privkey.pem;

    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}

server {
    listen 80;
    server_name admin.digitechai.in;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name admin.digitechai.in;

    ssl_certificate /etc/letsencrypt/live/admin.digitechai.in/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/admin.digitechai.in/privkey.pem;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
# pdgupta.com legacy site
server {
    listen 443 ssl;
    server_name pdgupta.com www.pdgupta.com;

    ssl_certificate /etc/letsencrypt/live/pdgupta.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/pdgupta.com/privkey.pem;

    location / {
        proxy_pass http://localhost:3010;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
# Nginx Configuration for Headless CMS - VPS IP: 72.62.243.99
# Place this file at: /etc/nginx/sites-available/cms

## Removed duplicate/legacy admin.digitechai.in blocks (now handled above)

# Firm 1 - Sharma & Associates
server {
    listen 80;
    server_name sagartask.in www.sagartask.in;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name sagartask.in www.sagartask.in;

    ssl_certificate /etc/letsencrypt/live/sagartask.in/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/sagartask.in/privkey.pem;

    location / {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}

# Firm 2 - Verma Accounting
server {
    listen 80;
    server_name automatepractice.com www.automatepractice.com;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name automatepractice.com www.automatepractice.com;

    ssl_certificate /etc/letsencrypt/live/automatepractice.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/automatepractice.com/privkey.pem;

    location / {
        proxy_pass http://localhost:3002;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}

# Firm 3 - Gupta Tax Advisors
server {
    listen 80;
    server_name capracticeautomation.com www.capracticeautomation.com;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name capracticeautomation.com www.capracticeautomation.com;

    ssl_certificate /etc/letsencrypt/live/capracticeautomation.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/capracticeautomation.com/privkey.pem;

    location / {
        proxy_pass http://localhost:3003;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}

# Firm 4 - Kapoor Financial
server {
    listen 80;
    server_name practovia.com www.practovia.com;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name practovia.com www.practovia.com;

    ssl_certificate /etc/letsencrypt/live/practovia.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/practovia.com/privkey.pem;

    location / {
        proxy_pass http://localhost:3004;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}

# Firm 5 - Singh & Partners
server {
    listen 80;
    server_name digitechai.in www.digitechai.in;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name digitechai.in www.digitechai.in;

    ssl_certificate /etc/letsencrypt/live/digitechai.in/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/digitechai.in/privkey.pem;

    location / {
        proxy_pass http://localhost:3005;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}

# Firm 6 - Patel Group
server {
    listen 80;
    server_name cadeepakgupta.com www.cadeepakgupta.com;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name cadeepakgupta.com www.cadeepakgupta.com;

    ssl_certificate /etc/letsencrypt/live/cadeepakgupta.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/cadeepakgupta.com/privkey.pem;

    location / {
        proxy_pass http://localhost:3006;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}